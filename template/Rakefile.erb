#!/usr/bin/env rake
# -*- mode: ruby; coding: utf-8 -*-

require 'rake'
require 'rspec/core/rake_task'

RSpec::Core::RakeTask.new(:spec) do |t|
  t.pattern = 'spec/*/*_spec.rb'
end

#variables to operate
:target_zone => <%= target_zone %>
:target_zone_files => FileList.new(<%= target_zone_files %>)
:target_conf_files => FileList.new(<%= target_conf_files %>)

task :deploy => [:backup, :install, :checkfile] do |t|
end

task :backup do |t|
  backup_dir = "backup/#{time_str}"
  target_zone_files.each do |zfile|
    time_str = Time.now.strftime('%Y-%m-%d-%H-%M-%S')
    directory "#{backup_dir}#{File.dirname(zfile)}"
    file zfile do
      cp zfile, File.dirname(zfile)
    end
  end
end

task :install do |t|
end

task:update do |t|
end


task:rollback do |t|
end
